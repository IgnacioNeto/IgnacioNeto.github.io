<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Página de contatos</title>

     <!-- padrão para expansividade do site -->
    <meta name="viewport" content="width=device-width,initial-scale=1">

     <!-- add o icone no canto da aba da pagina -->
    <link rel="icon" href="Assets/alvo_favicon.ico" sizes="64x64"> 

    <!-- Descrição resumida do site -->
    <meta name="description" content="Alvo é uma plataforma de treinamentos online voltada principalmente para engenheiros e projetistas mecânicos">

    <!-- Palavras-chave de página -->
    <meta name="keywords" content="solidworks, autocad, excel, online">
    <link rel="stylesheet" href="css/style.css">

    <!-- Link do CSS (Bootstrap)  -->
    <link href="js/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<!--__________________________________________________________________________________________  -->
<body>

    <!-- Header com logo e nav -->
    <div id="containerb">
        <header id="topo" class="clearfix">
            <h1>
                <a href="index.html">
                    <img src="Assets/Logo_1.png" width="30" alt="Logo">
                </a>
            </h1>
            <nav>
                <ul>
                    <li><a href="index.html" title="home">Home</a></li>
                    <li><a href="treinamentos.html" title="treinamentos">Treinamentos</a></li>
                    <li><a href="sobre.html" title="sobre nos">Sobre nós</a></li>
                    <li><a href="contato.html" title="fale conosco">Contato</a></li>
                </ul>
            </nav>
            
        </header>
<!-- ________________________________________________________________________________________________ -->
    <!-- iniciando o formulário -->      
    <main id="conteudo">
            
            <article id="geral">
                <section id="explicacao">
                    <h2>Contato</h2>
                    <p>Preencha o formulário abaixo para entrar em contato conosco.</p>
                    <p>Se preferir, utilize o telefone: <b>(11)-99999-8888</b> ou o e-mail: <b>contatoAlvo@gmail.com</b></p>
                </section>

            <form action="https://formspree.io/f/xayvarez" method="post" id="my-form">
                <div>
                    <label for="nome">Nome:</label>
                    <input type="text" name="nome" id="nome" required>
                </div>

                <div>
                    <label for="email">E-mail:</label>
                    <input type="email" name="email" id="email" required>
                </div>

                <div>
                    <label for="data">Data:</label>
                    <input type="date" name="data" id="data">
                </div>

                <div>
                    <label for="telefone">Telefone:</label>
                    <input type="tel" name="telefone" id="telefone" placeholder="Digite apenas números, incluindo o DDD">
                </div>

                <div>
                    <label for="cep">CEP:</label>
                    <input type="text" id="cep" name="cep" maxlength="9" required>
                    <b id="status"></b>
                </div>

                <div>
                    <label for="endereco">Endereço:</label>
                    <input type="text" name="endereco" id="endereco" size="30">
                </div>

                <div>
                    <label for="bairro">Bairro:</label>
                    <input type="text" name="bairro" id="bairro">
                </div>

                <div>
                    <label for="cidade">Cidade:</label>
                    <input type="text" name="cidade" id="cidade">
                </div>

                <div>
                    <label for="estado">Estado:</label>
                    <input type="text" name="estado" id="estado">
                </div>

                <div>
                    <label for="mensagem">Mensagem:
                         <span id="maximo"> (restam <b id="caracteres">250</b> caracteres)</span>
                    </label><br>
                    <textarea name="mensagem" id="mensagem" cols="20" rows="5" maxlength="250"></textarea>
                </div>

                <button type="submit" id="my-form-button" class="botao">Enviar dados</button>
                <p id="my-form-status"></p>
            </form>
    </main>
<!-- __________________________________________________________________________________________________ -->
<!-- Mapa -->
    <h2>Localização # Visite-nos!</h2>
        <div id="mapa">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3658.1761016747014!2d-46.542480384428444!3d-23.5261677661801!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce5e46752d26e5%3A0xfd7d34baaa261c06!2sR.%20Francisco%20Coimbra%2C%20403%20-%20Penha%20de%20Fran%C3%A7a%2C%20S%C3%A3o%20Paulo%20-%20SP%2C%2003639-000!5e0!3m2!1spt-BR!2sbr!4v1644416750402!5m2!1spt-BR!2sbr" width="100%" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
        <!-- para tornar o mapa expansivo alterado o width p/ 100% -->
        </div>
        
    <!-- ______________________________________________________________________________________________ -->
    <!-- Footer Bootstrap (Moderno)  -->

    <footer class="bg-dark text-white pt-5 pb-4">

        <div class="container text-center text-md-left">

            <div class="row text-center text-md-left">
                <!-- 1ª Secção Footer -->
                <div class=" col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Alvo</h5>
                    <p>Alvo é uma empresa de treinamentos e consultoria online, temos profissionais que atuam realmente na industria para garantir sempre um conteúdo moderno e atualizado aos nossos alunos.</p>

                </div>
    <!--_________________________________________________________________________________  -->
                <!-- 2ª Secção Footer -->
                <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Produtos</h5>
                    <p>
                        <a href="treinamentos.html" class="text-white" style="text-decoration: none;">Treinamentos</a>
                    </p>
                    <p>
                        <a href="contato.html" class="text-white" style="text-decoration: none;">Consultoria</a>
                    </p>
                    <p>
                        <a href="contato.html" class="text-white" style="text-decoration: none;">Suporte</a>
                    </p>
                </div>
    <!--_________________________________________________________________________________  -->
                <!-- 3ª Secção Footer -->
                <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Links úteis</h5>
                    <p>
                        <a href="#" class="text-white" style="text-decoration: none;">Contas</a>
                    </p>
                    <p>
                        <a href="#" class="text-white" style="text-decoration: none;">Afiliados</a>
                    </p>
                    <p>
                        <a href="#" class="text-white" style="text-decoration: none;">Ajuda</a>
                    </p>
                </div>
    <!--_________________________________________________________________________________  -->
                <!-- 4ª Secção Footer -->                  
                <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Contatos</h5>
                    <p>
                        <i class="fas fa-home mr-3"></i> Rua: Francisco Coimbra, 403 - SP
                    </p>
                    <p>
                        <i class="fas fa-envelope mr-3"></i> contatoAlvo@gmail.com
                    </p>
                    <p>
                        <i class="fas fa-phone mr-3"></i> Tel. (11)99999-8888
                    </p>
                    <p>
                        <i class="fa-solid fa-location-dot mr-3"></i> CEP 03639-000
                    </p>
                </div>

                </div>
    <!--_________________________________________________________________________________  -->
                <!-- 5ª Secção Footer -->
                <hr class="mb-4">
                <div class="row align-items-center">

                    <div class="col-md-7 col-lg-8">
                        <p> <b>Alvo</b> | &copy; 2022 Todos os direitos reservados
                        <a href="#" style="text-decoration: none;">

                        </a></p>
                    </div>

                <div class="col-md-5 col-lg-4">
                    <div class="text-center text-md-right">
                        <ul class="list-unstyled list-inline">
                            <li class="list-inline-item">
                                <a href="https://www.facebook.com/" target="_blank" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-facebook"></i></a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://twitter.com/" target="_blank" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-twitter"></i></a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://instagram.com/" target="_blank" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-instagram"></i></a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://br.linkedin.com/" target="_blank" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-linkedin"></i></a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://www.youtube.com/" target="_blank" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-youtube"></i></a>
                            </li>
                        </ul>

                    </div>

                </div>

    </footer>
    </div>
    <!--__________________________________________________________________________________________  -->
    <!-- Bootstrap JS -->
    <script src="js/bootstrap.bundle.min.js"></script>

    <!--___________________________________________________________________________________________ -->

    <!-- Vanilla Masker para o formulário (Plugin para validação do formulário)-->
    <script src="plugins/vanilla-masker.min.js"></script>

    <script>
        // Corrige o CEP
        VMasker(document.querySelector("#cep")).maskPattern("99999-999");

        // Corrige o Telefone e o CPF/CNPJ
        function inputHandler(masks, max, event) {
            var c = event.target;
            var v = c.value.replace(/\D/g, '');
            var m = c.value.length > max ? 1 : 0;
            VMasker(c).unMask();
            VMasker(c).maskPattern(masks[m]);
            c.value = VMasker.toPattern(v, masks[m]);
            }

            var telMask = ['(99) 9999-99999', '(99) 99999-9999'];
            var tel = document.querySelector('#telefone');
            VMasker(tel).maskPattern(telMask[0]);
            tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);

            var docMask = ['999.999.999-999', '99.999.999/9999-99'];
            var doc = document.querySelector('#documento');
            VMasker(doc).maskPattern(docMask[0]);
            doc.addEventListener('input', inputHandler.bind(undefined, docMask, 14), false);
    </script>
<!-- __________________________________________________________________________________________________________________ -->
    <!-- JavaScript do Formspree (Plugin envio do formulário ao e-mail via API de terceiro)-->
    <script>
        var form = document.getElementById("my-form");
        
        async function handleSubmit(event) {
          event.preventDefault();
          var status = document.getElementById("my-form-status");
          var data = new FormData(event.target);
          fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
                'Accept': 'application/json'
            }
          }).then(response => {
            if (response.ok) {
              status.innerHTML = "Mensagem enviada com sucesso!";
              form.reset()
            } else {
              response.json().then(data => {
                if (Object.hasOwn(data, 'errors')) {
                  status.innerHTML = data["errors"].map(error => error["message"]).join(", ")
                } else {
                  status.innerHTML = "Oops! Houve um problema ao enviar seu formulário."
                }
              })
            }
          }).catch(error => {
            status.innerHTML = "Oops! Houve um problema ao enviar seu formulário."
          });
        }
        form.addEventListener("submit", handleSubmit)
    </script>
<!-- __________________________________________________________________________________________________________________ -->
<!-- Utilizando Webservice VIACEP para preencher o formulário com o CEP -->
<!-- Como foi baixada faz-se a referência abaixo da biblioteca -->
<script src="plugins/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function() {

        function limpa_formulário_cep() {
            // Limpa valores do formulário de cep.
            $("#endereco").val("");
            $("#bairro").val("");
            $("#cidade").val("");
            $("#estado").val("");
        }
        
        //Quando o campo cep perde o foco.
        $("#cep").blur(function() {

            //Nova variável "cep" somente com dígitos.
            var cep = $(this).val().replace(/\D/g, '');

            //Verifica se campo cep possui valor informado.
            if (cep != "") {

                //Expressão regular para validar o CEP.
                var validacep = /^[0-9]{8}$/;

                //Valida o formato do CEP.
                if(validacep.test(cep)) {

                    //Preenche os campos com "..." enquanto consulta webservice.
                    $("#endereco").val("...");
                    $("#bairro").val("...");
                    $("#cidade").val("...");
                    $("#estado").val("...");
                    $("#status").text("CEP encontrado").css('color', 'black');

                    

                    //Consulta o webservice viacep.com.br/
                    $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                        if (!("erro" in dados)) {
                            //Atualiza os campos com os valores da consulta.
                            $("#endereco").val(dados.logradouro);
                            $("#bairro").val(dados.bairro);
                            $("#cidade").val(dados.localidade);
                            $("#estado").val(dados.uf);
                            $("#status").text(" ").css('color', 'black');
                        } //end if.
                        else {
                            //CEP pesquisado não foi encontrado.
                            limpa_formulário_cep();
                            $("#status").text("CEP não encontrado.").css('color', 'red');
                        }
                    });
                } //end if.
                else {
                    //cep é inválido.
                    limpa_formulário_cep();
                    $("#status").text("Formato de CEP inválido.").css('color', 'red');
                }
            } //end if.
            else {
                //cep sem valor, limpa formulário.
                limpa_formulário_cep();
            }
        });
    });
</script>
<!-- __________________________________________________________________________________________________________________ -->
<!-- Criando um contador de caracteres -->

<script>
    // const spanMaximo = document.querySelector("#maximo"); (como usando Jquery pode ser usado $)
    const spanMaximo = $("#maximo");
    const bCaracteres = $("#caracteres");
    const textMensagem = $("#mensagem");

    // Determinando a quantidade de caracteres
    let quantidade = 250;

    // Ouvinte de evento
    textMensagem.on ("input", function() {

        let conteudo = textMensagem.val();
        let contagem = quantidade - conteudo.length;

        // Exibindo o número de caracteres no HTML
        bCaracteres.text(contagem);

        // Se para trocar para frase "Limite de caracteres alcançado" e voltar
        if (contagem == 0) {
            spanMaximo.css('color', 'red');
            spanMaximo.text("Limite de caracteres alcançado");
        } else if (contagem == 1){
            spanMaximo.css('color', 'black');
            spanMaximo.html("(resta apenas <b id='caracteres'>" +contagem+ "</b> caractere)");     
        } else {
            spanMaximo.css('color', 'black');
            spanMaximo.html("(restam <b id='caracteres'>" +contagem+ "</b> caracteres)");
        }
    });

</script>

</body>
</html>